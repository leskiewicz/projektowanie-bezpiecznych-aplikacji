@startuml

actor Client
participant "OAuth Server" as OAuth
participant "API Server" as API
participant "Database" as DB

alt Valid client credentials
    Client -> OAuth: /oauth/token
    OAuth -> Client: token response (ex. JWT)
else Invalid client credentials
    Client -> OAuth: /oauth/token
    OAuth -> Client: 401 Unauthorized
end

activate OAuth
Client -> API: DELETE /resource/{id}
API -> OAuth: verify token
alt Valid token
    OAuth -> API: valid token
    alt Data exists
        API -> DB: DELETE
        DB -> API: 1 ROW DELETED
        API -> Client: 204 No content
    else Data does not exists
        API -> DB: DELETE
        DB -> API: 0 ROWS DELETED
        API -> Client: 404 Not found
    end
else Invalid token
    OAuth -> API: invalid token
    API -> Client: 401 Unauthorized
end
deactivate OAuth

@enduml